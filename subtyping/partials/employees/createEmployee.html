<div ng-init="prepareEmployee()">
  <h1>Create a new employee record</h1>
  <form class="form-horizontal" name="employeeInfo" novalidate="novalidate" ng-submit="addEmployee()">
    <div class="form-group">
      <label class="col-sm-4 control-label" for="cePersonId">ID</label>
      <div class="col-sm-8">
        <input class="form-control" id="cePersonId" type="number" name="personId" ng-min="1"
               ng-model="employee.personId" pl-stdid="pl-stdid" ng-required="true" />
        <span class="bg-warning" ng-if="employeeInfo.$submitted || employeeInfo.personId.$dirty">
          <span ng-messages="employeeInfo.personId.$error"
                ng-messages-include="partials/employees/errorMessages/errorPersonId.html">
          </span>
          <span ng-if="employeeInfo.personId.$pending.plStdid">Checking the library...</span>
        </span>
      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-4 control-label" for="ceName">Name</label>
      <div class="col-sm-8">
        <input class="form-control" id="ceName" type="text" name="name" ng-model="employee.name"
               ng-required="true" />
        <span class="bg-warning" ng-if="employeeInfo.$submitted || employeeInfo.name.$dirty">
          <span ng-messages="employeeInfo.name.$error"
                ng-messages-include="partials/employees/errorMessages/errorName.html">
          </span>
        </span>
      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-4 control-label" for="ceEmpNo">Employee no.</label>
      <div class="col-sm-8">
        <input class="form-control" id="ceEmpNo" type="number" name="empNo" ng-min="1"
               ng-model="employee.empNo" pl-stdid="pl-stdid" ng-required="true" />
        <span class="bg-warning" ng-if="employeeInfo.$submitted || employeeInfo.empNo.$dirty">
          <span ng-messages="employeeInfo.empNo.$error"
                ng-messages-include="partials/employees/errorMessages/errorEmpNo.html">
          </span>
          <span ng-if="employeeInfo.empNo.$pending.plStdid">Checking the library...</span>
        </span>
      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-4 control-label" for="ceSubtype">Special type</label>
      <div class="col-sm-8">
        <select class="form-control" id="ceSubtype" name="subtype" ng-model="employee.subtype"
                ng-options="employeeTypeOption for employeeTypeOption in employeeTypeOptions">
          <option value="">...</option>
        </select>
      </div>
    </div>
    <div ng-switch="employee.subtype">
      <div class="form-group" ng-switch-when="Manager">
        <label class="col-sm-4 control-label" for="ceDepartment">Department</label>
        <div class="col-sm-8">
          <input class="form-control" id="ceDepartment" type="text" name="department"
                 ng-model="employee.department" ng-required="true" />
          <span class="bg-warning" ng-if="employeeInfo.$submitted || employeeInfo.department.$dirty">
            <span ng-messages="employeeInfo.department.$error"
                  ng-messages-include="partials/employees/errorMessages/errorDepartment.html">
            </span>
          </span>
        </div>
      </div>
      <div ng-switch-default="ng-switch-default"></div>
    </div>
    <div class="form-group">
      <div class="col-sm-12">
        <button class="btn btn-primary btn-block" type="submit" name="commit"
                ng-disabled="employeeInfo.$invalid || employeeInfo.$pending">
          Save
        </button>
      </div>
    </div>
  </form>
  <nav>
    <a href="#/employees/manageEmployees">
      Back to "Manage Employees" menu
    </a>
  </nav>
</div>
